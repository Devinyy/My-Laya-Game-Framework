{
  "code": "import { LwgControl, LwgCurrency, LwgDialogue, LwgScene } from \"../../../Lwg/Lwg\";\r\nimport { GameData } from \"../../Control/GameData\";\r\nimport { GameEnum } from \"../../Control/GameEnum\";\r\nimport { GameEvent } from \"../../Control/GameEvent\";\r\nimport GameSceneName from \"../../Control/GameSceneName\";\r\nimport { Control3D } from \"../../Game3D/Control3D\";\r\nexport default class Start extends LwgScene.SceneBase {\r\n    lwgOnAwake() {\r\n        Control3D.showMainScene();\r\n        this.changeMode();\r\n    }\r\n    lwgOpenAniAfter() {\r\n        Laya.timer.once(500, this, () => {\r\n            this.evNotify(GameEvent.redDotHint);\r\n        });\r\n        if (this.openData && this.openData.whereFrom == GameSceneName.Victory) {\r\n            if (GameData.Lottery.KeyNum >= 3) {\r\n                const data = {\r\n                    whereFrom: this.owner.name,\r\n                };\r\n                this.openOverlayScene(GameSceneName.Lottery, data);\r\n            }\r\n        }\r\n        else {\r\n            if (LwgControl.Login.totalNum === 1) {\r\n                if (this.openNum === 2 && !GameData.CheckIn.today) {\r\n                    this.openOverlayScene(GameSceneName.CheckIn);\r\n                }\r\n            }\r\n            else {\r\n                if (!GameData.CheckIn.today) {\r\n                    this.openOverlayScene(GameSceneName.CheckIn);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    lwgButton() {\r\n        this.btnOnDown(this.owner.startPic, () => {\r\n            if (LwgCurrency.Stamina.num >= 5) {\r\n                const data = {\r\n                    mode: this.curMode,\r\n                };\r\n                this.openScene(GameSceneName.Levels, data);\r\n                LwgCurrency.Stamina.addNumDisPlayNode(-5);\r\n                this.owner.startPic.destroy();\r\n            }\r\n            else {\r\n                LwgDialogue.showTips('体力不够了！');\r\n                const data = {\r\n                    type: GameEnum.ResType.Stamina,\r\n                };\r\n                this.openOverlayScene(GameSceneName.ADGetReward, data);\r\n            }\r\n        });\r\n        this.btnOnUp(this.owner.btnLuckyWheel, () => {\r\n            this.openOverlayScene(GameSceneName.LuckyWheel);\r\n        });\r\n        this.btnOnUp(this.owner.btnCheckIn, () => {\r\n            this.openOverlayScene(GameSceneName.CheckIn);\r\n        });\r\n        this.btnOnUpADCondition(this.owner.btnLottery, GameData.Lottery.KeyNum < 3, () => {\r\n            GameData.Lottery.KeyNum++;\r\n            this.updateKey();\r\n            if (this.owner[`key${GameData.Lottery.KeyNum}Ani`]) {\r\n                this.owner[`key${GameData.Lottery.KeyNum}Ani`].play(0, false);\r\n            }\r\n        }, () => {\r\n            const data = {\r\n                whereFrom: this.owner.name,\r\n            };\r\n            this.openOverlayScene(GameSceneName.Lottery, data);\r\n        });\r\n        this.btnOnUp(this.owner.btnSkin, () => {\r\n            this.openScene(GameSceneName.Skin);\r\n        });\r\n        this.btnOnUp(this.owner.btnCutMode, () => {\r\n            this.changeMode();\r\n        });\r\n    }\r\n    lwgEvent() {\r\n        this.evRegister(GameEvent.updateKeyNumStart, () => {\r\n            this.updateKey();\r\n        });\r\n    }\r\n    lwgOnStart() {\r\n        this.evNotify(GameEvent.updateKeyNumStart);\r\n    }\r\n    changeMode() {\r\n        if (this.curMode === undefined) {\r\n            this.curMode = GameEnum.LevelMode.common;\r\n        }\r\n        else {\r\n            this.owner.aniChangeMode.play(0, false);\r\n            this.owner.aniChangeMode.once(Laya.Event.LABEL, this, () => {\r\n                if (this.curMode === GameEnum.LevelMode.common) {\r\n                    this.curMode = GameEnum.LevelMode.endless;\r\n                    this.owner.btnCutMode.skin = 'Game/UI/img_btn_mainui_wujin_normal.png';\r\n                    Control3D.showEndLess();\r\n                }\r\n                else {\r\n                    this.curMode = GameEnum.LevelMode.common;\r\n                    this.owner.btnCutMode.skin = 'Game/UI/img_btn_mainui_gengduohaowan.png';\r\n                    Control3D.showMainScene();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    updateKey() {\r\n        for (let index = 1; index < 4; index++) {\r\n            if (index > GameData.Lottery.KeyNum) {\r\n                this.owner[`key${index}`].visible = false;\r\n            }\r\n            else {\r\n                this.owner[`key${index}`].visible = true;\r\n            }\r\n        }\r\n        if (GameData.Lottery.KeyNum >= 3) {\r\n            this.owner.btnLotteryADPic.visible = false;\r\n            Laya.timer.once(100, this, () => {\r\n                const data = {\r\n                    whereFrom: this.owner.name,\r\n                };\r\n                this.openOverlayScene(GameSceneName.Lottery, data);\r\n            });\r\n        }\r\n        else {\r\n            this.owner.btnLotteryADPic.visible = true;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/ui/layaMaxUI.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Lwg/Lwg.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameData.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEnum.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEvent.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameSceneName.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameType.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Game3D/Control3D.ts"
  ]
}

{
  "code": "import { LwgEvent } from \"../../Lwg/Lwg\";\r\nimport { GameData } from \"../Control/GameData\";\r\nimport { GameEnum } from \"../Control/GameEnum\";\r\nimport { GameEvent } from \"../Control/GameEvent\";\r\nimport { GameRes } from \"../Control/GameRes\";\r\nimport { SceneBase } from \"./SceneBase\";\r\nexport class MainScene extends SceneBase {\r\n    constructor() {\r\n        super(GameRes.Scene3D.MainScene.instance);\r\n        MainScene.ins = this;\r\n        this.scene.name = 'MainScene';\r\n    }\r\n    ready() {\r\n        this.roleType = null;\r\n        this.unitDataArr = GameData.Level.getUnitDataArr();\r\n        this.fAIndex = GameData.Level.getFoodAType();\r\n        this.fBIndex = GameData.Level.getFoodBType();\r\n        this.showbase();\r\n        for (let index = 0; index < this.unitDataArr.length - 1; index++) {\r\n            const element = this.unitDataArr[index];\r\n            this.mileageTotal += element.length;\r\n        }\r\n        LwgEvent.register(GameEvent.changeBoss, this, (type) => {\r\n            this.roleType = type;\r\n            for (let i = 0; i < this.unitParent.numChildren; i++) {\r\n                const unit = this.unitParent.getChildAt(i);\r\n                for (let j = 0; j < unit.numChildren; j++) {\r\n                    const child = unit.getChildAt(j);\r\n                    const childName = child.name;\r\n                    if (childName.substr(0, 4) == 'Food') {\r\n                        if (this.roleType == GameEnum.RoleType.vegan) {\r\n                            if (child.name.substr(0, 5) == 'FoodB') {\r\n                                this.addDecayEffect(child);\r\n                            }\r\n                        }\r\n                        else if (this.roleType == GameEnum.RoleType.meat) {\r\n                            if (child.name.substr(0, 5) == 'FoodA') {\r\n                                this.addDecayEffect(child);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    clear() {\r\n        this.hideBase();\r\n    }\r\n    changeBoss() {\r\n        if (this.endUnit.name == 'Road999') {\r\n            const bossPoint = this.endUnit.getChildByName('BossPoint');\r\n            const oldSkin = bossPoint.getChildAt(0);\r\n            if (this.roleType == GameEnum.RoleType.vegan) {\r\n                const newSkin = GameRes.Prefab3D.dino_215.instance.clone();\r\n                bossPoint.addChild(newSkin);\r\n                newSkin.transform.position = oldSkin.transform.position.clone();\r\n                newSkin.transform.localRotationEuler = oldSkin.transform.localRotationEuler.clone();\r\n                oldSkin.destroy();\r\n            }\r\n        }\r\n    }\r\n    changeFood() {\r\n        for (let index = 0; index < this.endUnit.numChildren; index++) {\r\n            const child = this.endUnit.getChildAt(index);\r\n            if (child['newFood']) {\r\n                continue;\r\n            }\r\n            if (child.name.substr(0, 4) === 'Food') {\r\n                let newFood;\r\n                if (child.name.substr(0, 5) === 'FoodA') {\r\n                    newFood = GameRes.Prefab3D['FoodA0' + this.fAIndex].instance.clone();\r\n                    if (this.roleType == GameEnum.RoleType.meat) {\r\n                        this.addDecayEffect(newFood);\r\n                    }\r\n                }\r\n                if (child.name.substr(0, 5) === 'FoodB') {\r\n                    newFood = GameRes.Prefab3D['FoodB0' + this.fBIndex].instance.clone();\r\n                    if (this.roleType == GameEnum.RoleType.vegan) {\r\n                        this.addDecayEffect(newFood);\r\n                    }\r\n                }\r\n                this.endUnit.addChild(newFood);\r\n                newFood.transform.position = child.transform.position.clone();\r\n                newFood['newFood'] = true;\r\n                child.active = false;\r\n            }\r\n        }\r\n    }\r\n    resCorrespondingFood(name) {\r\n        let res;\r\n        if (name.substr(0, 5) === 'FoodA') {\r\n            res = GameRes.Prefab3D['FoodA0' + this.fAIndex].instance;\r\n        }\r\n        else if (name.substr(0, 5) === 'FoodB') {\r\n            res = GameRes.Prefab3D['FoodB0' + this.fBIndex].instance;\r\n        }\r\n        return res;\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Lwg/Lwg.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameData.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEnum.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEvent.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameRes.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Game3D/SceneBase.ts"
  ]
}

{
  "code": "import { LwgDate, LwgDialogue, LwgScene, LwgWX } from \"../../Lwg/Lwg\";\r\nimport { GameAni2D } from \"../Control/GameAni2D\";\r\nimport { GameData } from \"../Control/GameData\";\r\nimport { GameEnum } from \"../Control/GameEnum\";\r\nimport GameSceneName from \"../Control/GameSceneName\";\r\nexport default class CheckIn extends LwgScene.SceneBase {\r\n    lwgOnAwake() {\r\n        this.setListData();\r\n        if (GameData.CheckIn.num >= 6 && !GameData.CheckIn.today) {\r\n            this.owner.hintDay7Ani.play(0, true);\r\n        }\r\n        if (GameData.CheckIn.today) {\r\n            this.owner.btnCheck.visible = false;\r\n            this.owner.btnDouble.visible = false;\r\n            this.owner.lbAlready.visible = true;\r\n        }\r\n        else {\r\n            this.owner.btnCheck.visible = true;\r\n            this.owner.btnDouble.visible = true;\r\n            this.owner.lbAlready.visible = false;\r\n        }\r\n    }\r\n    setListData() {\r\n        this.owner.listDay6.array = GameData.CheckIn.dayArr6;\r\n        this.owner.listDay6.renderHandler = new Laya.Handler(this, this.onlistDay6Render);\r\n        this.owner.listDay7Reward.array = GameData.CheckIn.day7RwardArr;\r\n        this.owner.listDay7Reward.renderHandler = new Laya.Handler(this, this.onlistDay7RewardRender);\r\n        this.owner.listDay7Reward.width = GameData.CheckIn.day7RwardArr.length * 178;\r\n        this.owner.listDay7Reward.visible = false;\r\n    }\r\n    onlistDay6Render(view, index) {\r\n        const data = view.dataSource;\r\n        view.dayNum.skin = `Game/UI/img_icon_text_day${index + 1}.png`;\r\n        view.icon.skin = data.iconSkin;\r\n        view.rewardNum.text = data.number.toString();\r\n        view.rewardNum.text = 'x' + data.number;\r\n        if (GameData.CheckIn.num > index) {\r\n            view.alreadyPic.visible = true;\r\n            view.imgMask.visible = true;\r\n        }\r\n        else {\r\n            view.alreadyPic.visible = false;\r\n            view.imgMask.visible = false;\r\n        }\r\n        if (GameData.CheckIn.num < 6) {\r\n            if (GameData.CheckIn.num === index) {\r\n                if (!GameData.CheckIn.today) {\r\n                    view.aniHint.play(0, true);\r\n                    view.zOrder = 10;\r\n                }\r\n            }\r\n            else {\r\n                view.zOrder = 1;\r\n            }\r\n        }\r\n    }\r\n    onDay6select(index, view, AD) {\r\n        if (GameData.CheckIn.num < 6) {\r\n            if (GameData.CheckIn.num > index) {\r\n                LwgDialogue.showTips('已经签到过了');\r\n            }\r\n            else if (GameData.CheckIn.num === index) {\r\n                if (!GameData.CheckIn.today) {\r\n                    GameData.CheckIn.num++;\r\n                    GameData.CheckIn.lastDate = LwgDate.Now.date;\r\n                    this.owner.listDay6.refresh();\r\n                    const data = GameData.CheckIn.dayArr6[index];\r\n                    if (data.ID >= 110 && data.ID <= 121) {\r\n                        const obj = {\r\n                            rewardId: data.ID,\r\n                            rewardNum: data.number,\r\n                        };\r\n                        this.openOverlayScene(GameSceneName.BeRewarded, obj);\r\n                    }\r\n                    else {\r\n                        let num = data.number;\r\n                        if (AD) {\r\n                            num *= 2;\r\n                        }\r\n                        GameAni2D.getRewardAni(data.ID, num, () => {\r\n                        }, () => {\r\n                            this.closeScene();\r\n                        });\r\n                    }\r\n                    view.aniHint.stop();\r\n                }\r\n                else {\r\n                    LwgDialogue.showTips('不可以');\r\n                }\r\n            }\r\n            else {\r\n                LwgDialogue.showTips('不可以');\r\n            }\r\n        }\r\n    }\r\n    onlistDay7RewardRender(view, index) {\r\n        const data = view.dataSource;\r\n        view.icon.skin = data.picBigSkin;\r\n        view.rewardNum.text = data.number.toString();\r\n        if (data.ID >= 201 && data.ID <= 299) {\r\n            view.rewardNum.visible = false;\r\n        }\r\n        else {\r\n            view.rewardNum.visible = true;\r\n        }\r\n    }\r\n    lwgButton() {\r\n        this.btnOnUp(this.owner.btnCheck, () => {\r\n            if (GameData.CheckIn.num >= 6 && !GameData.CheckIn.today) {\r\n                this.onBtnDay7();\r\n            }\r\n            else {\r\n                const view = this.owner.listDay6.getCell(GameData.CheckIn.num);\r\n                this.onDay6select(GameData.CheckIn.num, view, false);\r\n            }\r\n        });\r\n        this.btnOnUp(this.owner.btnDouble, () => {\r\n            LwgWX.AD.showVideo(() => {\r\n                if (GameData.CheckIn.num >= 6 && !GameData.CheckIn.today) {\r\n                    this.onBtnDay7();\r\n                }\r\n                else {\r\n                    const view = this.owner.listDay6.getCell(GameData.CheckIn.num);\r\n                    this.onDay6select(GameData.CheckIn.num, view, true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    onBtnDay7() {\r\n        if (GameData.CheckIn.num >= 6 && !GameData.CheckIn.today) {\r\n            GameData.CheckIn.num++;\r\n            GameData.CheckIn.lastDate = LwgDate.Now.date;\r\n            for (let index = 0; index < GameData.CheckIn.day7RwardArr.length; index++) {\r\n                const data = GameData.CheckIn.day7RwardArr[index];\r\n                if (data.type === GameEnum.ItemType.Skin) {\r\n                    const obj = {\r\n                        rewardId: data.ID,\r\n                        rewardNum: data.number,\r\n                    };\r\n                    this.openOverlayScene(GameSceneName.BeRewarded, obj);\r\n                    this.closeScene();\r\n                }\r\n                else {\r\n                    GameAni2D.getRewardAni(data.ID, data.number, () => {\r\n                    }, () => {\r\n                        this.closeScene();\r\n                    });\r\n                }\r\n                this.owner.hintDay7Ani.stop();\r\n            }\r\n        }\r\n        else {\r\n            LwgDialogue.showTips('不可以');\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/ui/layaMaxUI.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Lwg/Lwg.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameAni2D.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameData.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEnum.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEvent.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameSceneName.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameType.ts"
  ]
}

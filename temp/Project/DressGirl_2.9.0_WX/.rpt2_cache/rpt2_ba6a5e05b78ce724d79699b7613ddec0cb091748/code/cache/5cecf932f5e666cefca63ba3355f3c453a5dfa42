{
  "code": "import { LwgClick, LwgControl, LwgCurrency, LwgDialogue, LwgScene } from \"../../../Lwg/Lwg\";\r\nimport { GameData } from \"../../Control/GameData\";\r\nimport { GameEnum } from \"../../Control/GameEnum\";\r\nimport { GameEvent } from \"../../Control/GameEvent\";\r\nimport GameSceneName from \"../../Control/GameSceneName\";\r\nimport { Control3D } from \"../../Game3D/Control3D\";\r\nexport default class Start extends LwgScene.SceneBase {\r\n    lwgOnAwake() {\r\n        this.showCurMode();\r\n    }\r\n    lwgOpenAniAfter() {\r\n        Laya.timer.once(500, this, () => {\r\n            this.evNotify(GameEvent.redDotHint);\r\n        });\r\n        if (this.openData && this.openData.whereFrom == GameSceneName.Victory) {\r\n            this.updateKey(true);\r\n        }\r\n        else {\r\n            if (LwgControl.Login.totalNum === 1) {\r\n                if (this.openNum === 2 && !GameData.CheckIn.today) {\r\n                    this.openOverlayScene(GameSceneName.CheckIn);\r\n                }\r\n                else {\r\n                    this.updateKey(true);\r\n                }\r\n            }\r\n            else {\r\n                if (!GameData.CheckIn.today) {\r\n                    this.openOverlayScene(GameSceneName.CheckIn);\r\n                }\r\n                else {\r\n                    this.updateKey(true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    lwgButton() {\r\n        this.btnOnDown(this.owner.startPic, () => {\r\n            if (GameData.Level.mode === GameEnum.LevelMode.endless) {\r\n                if (GameData.Level.endlessFreeNum > 0) {\r\n                    this.openScene(GameSceneName.SkinTry);\r\n                    GameData.Level.endlessFreeNum--;\r\n                }\r\n                else {\r\n                    LwgDialogue.openDialogHint({\r\n                        type: LwgDialogue.EmDialogHint.Double,\r\n                        content: '是否开启无尽模式',\r\n                        onBtnConfirm: () => {\r\n                            this.openScene(GameSceneName.SkinTry);\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (LwgCurrency.Stamina.num >= 5) {\r\n                    LwgCurrency.Stamina.addNumDisPlayNode(-5);\r\n                    this.openScene(GameSceneName.Levels);\r\n                }\r\n                else {\r\n                    LwgDialogue.showTips('体力不够了！');\r\n                    const data = {\r\n                        type: GameEnum.ResType.Stamina,\r\n                    };\r\n                    this.openOverlayScene(GameSceneName.ADGetReward, data);\r\n                }\r\n            }\r\n        });\r\n        this.btnOnUp(this.owner.btnLuckyWheel, () => {\r\n            this.openOverlayScene(GameSceneName.LuckyWheel);\r\n        });\r\n        this.btnOnUp(this.owner.btnCheckIn, () => {\r\n            this.openOverlayScene(GameSceneName.CheckIn);\r\n        });\r\n        this.btnOnUpADCondition(this.owner.btnLottery, () => {\r\n            return GameData.Lottery.KeyNum < 3;\r\n        }, () => {\r\n            GameData.Lottery.KeyNum++;\r\n            this.updateKey(true);\r\n            if (this.owner[`key${GameData.Lottery.KeyNum}Ani`]) {\r\n                this.owner[`key${GameData.Lottery.KeyNum}Ani`].play(0, false);\r\n            }\r\n        }, () => {\r\n            const data = {\r\n                whereFrom: this.owner.name,\r\n            };\r\n            this.openOverlayScene(GameSceneName.Lottery, data);\r\n        });\r\n        this.btnOnUp(this.owner.btnSkin, () => {\r\n            this.openScene(GameSceneName.Skin);\r\n        });\r\n        this.btnOnUp(this.owner.btnCutMode, () => {\r\n            this.changeMode();\r\n        });\r\n    }\r\n    lwgEvent() {\r\n        this.evRegister(GameEvent.updateKeyNumStart, (openLottery) => {\r\n            this.updateKey(openLottery);\r\n        });\r\n    }\r\n    lwgOnStart() {\r\n    }\r\n    showCurMode() {\r\n        if (GameData.Level.mode === GameEnum.LevelMode.common) {\r\n            this.owner.btnCutMode.skin = 'Game/UI/img_home_btn_wujin.png';\r\n            this.owner.lbEndlessTitle.visible = false;\r\n            this.owner.imgLogo.visible = true;\r\n            Control3D.showMainScene();\r\n        }\r\n        else {\r\n            this.owner.lbEndlessTitle.visible = true;\r\n            this.owner.imgLogo.visible = false;\r\n            this.owner.btnCutMode.skin = 'Game/UI/img_home_btn_putong.png';\r\n            Control3D.showEndLess();\r\n        }\r\n    }\r\n    changeMode() {\r\n        LwgClick.Filter.setValue(LwgClick.EmfilterType.none);\r\n        LwgCurrency.Diamond.hide();\r\n        LwgCurrency.Stamina.hide();\r\n        this.owner.aniChangeMode.play(0, false);\r\n        this.owner.aniChangeMode.once(Laya.Event.LABEL, this, () => {\r\n            LwgCurrency.Diamond.show();\r\n            LwgCurrency.Stamina.show();\r\n            if (GameData.Level.mode === GameEnum.LevelMode.common) {\r\n                GameData.Level.mode = GameEnum.LevelMode.endless;\r\n            }\r\n            else {\r\n                GameData.Level.mode = GameEnum.LevelMode.common;\r\n            }\r\n            this.showCurMode();\r\n            LwgClick.Filter.setValue(LwgClick.EmfilterType.all);\r\n        });\r\n    }\r\n    updateKey(openLottery = false) {\r\n        for (let index = 1; index < 4; index++) {\r\n            if (index > GameData.Lottery.KeyNum) {\r\n                this.owner[`key${index}`].visible = false;\r\n            }\r\n            else {\r\n                this.owner[`key${index}`].visible = true;\r\n            }\r\n        }\r\n        if (GameData.Lottery.KeyNum >= 3) {\r\n            this.owner.btnLotteryADPic.visible = false;\r\n            if (openLottery) {\r\n                Laya.timer.once(100, this, () => {\r\n                    const data = {\r\n                        whereFrom: this.owner.name,\r\n                    };\r\n                    this.openOverlayScene(GameSceneName.Lottery, data);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.owner.btnLotteryADPic.visible = true;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/ui/layaMaxUI.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Lwg/Lwg.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameData.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameEnum.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameEvent.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameRes.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameSceneName.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Control/GameType.ts",
    "E:/svn/泡泡/Bubble_Laya_2.9.0/Project/src/script/Game/Game3D/Control3D.ts"
  ]
}

{
  "code": "import { LwgControl, LwgEvent, LwgGuide, LwgTimer } from \"../../../Lwg/Lwg\";\r\nimport { GameData } from \"../../Control/GameData\";\r\nimport { GameEnum } from \"../../Control/GameEnum\";\r\nimport { GameEvent } from \"../../Control/GameEvent\";\r\nimport { Role, StateControl } from \"../../Game3D/Role\";\r\nexport class Guide extends LwgGuide.GuideBase {\r\n    onAwake() {\r\n        this.evRegister(GameEvent.updateHead, (skinName, guide) => {\r\n            const type = GameData.Skin.getTypeByName(skinName);\r\n            this.imgRoleIcon.skin = `Game/UI/SkinIcon/${skinName}.png`;\r\n            if (type === GameEnum.RoleType.meat) {\r\n                this.imgRoleBoard.skin = 'Game/UI/img_icon_battlebg_02.png';\r\n            }\r\n            else {\r\n                this.imgRoleBoard.skin = 'Game/UI/img_icon_battlebg_01.png';\r\n            }\r\n            if (GameData.Level.mode === GameEnum.LevelMode.common && this.stepIndex === 4 && guide) {\r\n                this.base(4);\r\n            }\r\n        });\r\n        this.evRegister(GameEvent.updateLvSchedule, (per, mileage) => {\r\n            if (GameData.Level.mode === GameEnum.LevelMode.common && this.stepIndex === 1) {\r\n                if (mileage >= 5) {\r\n                    this.base(1);\r\n                }\r\n            }\r\n        });\r\n        LwgEvent.register(GameEvent.changeBoss, this, (type) => {\r\n            if (GameData.Level.mode === GameEnum.LevelMode.common && this.stepIndex === 2) {\r\n                this.roleType = type;\r\n                this.base(2);\r\n            }\r\n        });\r\n        this.evRegister(GameEvent.updateGrowthValue, (growthValue) => {\r\n            if (GameData.Level.mode === GameEnum.LevelMode.common && LwgControl.Game.level === 1) {\r\n                if (growthValue < 1) {\r\n                    StateControl.EatFood.ins.growthValue = 1;\r\n                }\r\n            }\r\n        });\r\n        this.evRegister(GameEvent.updateRoleHP, (hp) => {\r\n            if (!this['hpalredy']) {\r\n                StateControl.VSBOSS.ins.roleHP = 4000;\r\n                this['hpalredy'] = true;\r\n            }\r\n            if (LwgControl.Game.level === 1 && hp < 100) {\r\n                StateControl.VSBOSS.ins.roleHP = 100;\r\n            }\r\n        });\r\n    }\r\n    guideEnd() {\r\n        if (this.stepIndex == 3) {\r\n            this.base(3);\r\n        }\r\n        else if (this.stepIndex === 5) {\r\n            this.compelet = true;\r\n        }\r\n    }\r\n    base(index) {\r\n        Role.ins.setState(GameEnum.RoleState.Guide);\r\n        this.guideStart(() => {\r\n            this[`step${index}`] && this[`step${index}`]();\r\n        });\r\n        console.log(`step${index}`);\r\n    }\r\n    step1() {\r\n        this.dynamicWord(3);\r\n        this.aniShowDialog.play(0, false);\r\n    }\r\n    step2() {\r\n        this.dynamicWord(4);\r\n        this.aniShowDialog.play(0, false);\r\n    }\r\n    step3() {\r\n        this.dynamicWord(6);\r\n        this.boxDialog.visible = true;\r\n        if (this.roleType === GameEnum.RoleType.vegan) {\r\n            this.boxArrowsL.visible = true;\r\n            this.aniPointingL.play(0, true);\r\n        }\r\n        else {\r\n            this.boxArrowsR.visible = true;\r\n            this.aniPointingR.play(0, true);\r\n        }\r\n    }\r\n    step4() {\r\n        this.dynamicWord(5);\r\n        this.aniShowDialog.play(0, false);\r\n    }\r\n    dynamicWord(ID) {\r\n        this.lbDescribe.text = '';\r\n        const word = GameData.Guide.getValueByID(ID);\r\n        const time = word.length;\r\n        let index = 0;\r\n        LwgTimer.numLoop(50, time, this, () => {\r\n            this.lbDescribe.text += word.substr(index, 1);\r\n            index++;\r\n        });\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/ui/layaMaxUI.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Lwg/Lwg.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameData.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEnum.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEvent.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameType.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Game3D/Role.ts"
  ]
}

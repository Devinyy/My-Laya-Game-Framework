{
  "code": "import { LwgControl, LwgScene } from \"../../Lwg/Lwg\";\r\nimport { GameEvent } from \"../Control/GameEvent\";\r\nimport GameSceneName from \"../Control/GameSceneName\";\r\nimport { GameData } from \"../Control/GameData\";\r\nimport { Control3D } from \"../Game3D/Control3D\";\r\nexport default class Levels extends LwgScene.SceneBase {\r\n    get curCcore() {\r\n        return this['_curCcore'] ? this['_curCcore'] : 0;\r\n    }\r\n    set curCcore(val) {\r\n        this['_curCcore'] = val;\r\n    }\r\n    get growthValue() {\r\n        return this['_growthValue'] ? this['_growthValue'] : 0;\r\n    }\r\n    set growthValue(val) {\r\n        this['_growthValue'] = val;\r\n        this.owner.lbGrowthValue.text = val.toString();\r\n    }\r\n    lwgOnAwake() {\r\n        this.curCcore = 0;\r\n    }\r\n    lwgOnStart() {\r\n        Control3D.start();\r\n        this.setLevelProgress();\r\n        this.updateKey();\r\n    }\r\n    setLevelProgress() {\r\n        this.owner.lbCurLevel.text = LwgControl.Game.levelReal.toString();\r\n    }\r\n    lwgEvent() {\r\n        this.evRegister(GameEvent.updateRoleHP, (hp) => {\r\n            this.owner.lbRoleHP.visible = true;\r\n            this.owner.lbRoleHP.text = hp.toString();\r\n            this.owner.lbGrowthValue.visible = false;\r\n        });\r\n        this.evRegister(GameEvent.updateBossHP, (hp) => {\r\n            this.owner.lbBossHP.visible = true;\r\n            this.owner.lbBossHP.text = hp.toString();\r\n        });\r\n        this.evRegister(GameEvent.updateStrengthValue, (strengthValue) => {\r\n            this.owner.imgStrengthValue.mask.y = Math.round(this.owner.imgStrengthValue.height - strengthValue);\r\n            if (this.owner.imgStrengthValue.mask.y < 0) {\r\n                this.owner.boxStrength.visible = false;\r\n                this.owner.imgStrengthValue.mask.y = 0;\r\n            }\r\n            if (this.owner.imgStrengthValue.mask.y > this.owner.imgStrengthValue.height) {\r\n                this.owner.imgStrengthValue.mask.y = this.owner.imgStrengthValue.height;\r\n            }\r\n        });\r\n        this.evRegister(GameEvent.updateStrengthTime, (time) => {\r\n            this.owner.boxStrength.visible = true;\r\n            this.owner.lbStrengthTime.text = time + 's';\r\n            if (time < 0) {\r\n                this.owner.boxStrength.visible = false;\r\n            }\r\n        });\r\n        this.evRegister(GameEvent.updateGrowthValue, (growthValue) => {\r\n            this.growthValue = growthValue;\r\n        });\r\n        this.evRegister(GameEvent.updateScore, (score0) => {\r\n            this.curCcore += score0;\r\n        });\r\n        this.evRegister(GameEvent.updateSchedule, (per) => {\r\n            this.owner.levelProgress.mask.width = per * 280;\r\n        });\r\n        this.evRegister(GameEvent.victory, () => {\r\n            const data = {\r\n                score: this.curCcore,\r\n            };\r\n            this.openScene(GameSceneName.Victory, data);\r\n        });\r\n        this.evRegister(GameEvent.defeated, () => {\r\n            const data = {\r\n                score: this.curCcore,\r\n            };\r\n            this.openScene(GameSceneName.Defeated, data);\r\n        });\r\n        this.evRegister(GameEvent.pickedKey, () => {\r\n            GameData.Lottery.KeyNum++;\r\n            this.updateKey();\r\n        });\r\n    }\r\n    updateKey() {\r\n        for (let index = 1; index < 4; index++) {\r\n            if (index > GameData.Lottery.KeyNum) {\r\n                this.owner[`key${index}`].visible = false;\r\n            }\r\n            else {\r\n                this.owner[`key${index}`].visible = true;\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Lwg/Lwg.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameRes.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameEvent.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/ui/layaMaxUI.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameSceneName.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameType.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Control/GameData.ts",
    "E:/svn/恐龙跑酷/DinosaursGrow_Laya_2.9.0/DinosaursGrowUp_2.9.0/src/script/Game/Game3D/Control3D.ts"
  ]
}
